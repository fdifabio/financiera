<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:sec="http://www.springframework.org/security/facelets/tags">
<ui:composition template="/templates/template.xhtml">

    <ui:define name="subheader">
        <h:outputText class="BigTopic" value="#{msgs['formCreditoModificar']}"
                      rendered="#{creditoBean.entity.id != null}"/>

        <h:outputText class="BigTopic" value="#{msgs['formCreditoCrear']}"
                      rendered="#{creditoBean.entity.id == null}"/>
    </ui:define>

    <f:metadata>
        <f:viewParam name="id" value="#{creditoBean.id}"/>
        <f:event type="preRenderView" listener="#{creditoBean.inicio()}"/>
        <f:event type="preRenderView" listener="#{garanteBean.inicio()}"/>
        <f:event type="preRenderView" listener="#{clienteBean.inicio()}"/>
    </f:metadata>

    <ui:define name="actions">
        <a href="search.jsf"
           class="BoldGray Fs18 FontRobotoLight Fright MarRight20 HoverEffect"><i
                class="icon-list"></i> #{msgs['listar']}</a>
    </ui:define>
    <ui:define name="content">
        <div class="Container100">
            <div class="ContainerIndent">
                <div class="Card ShadowEffect ui-fluid">
                    <div class="MarAuto WidAutoOnMobile">
                        <div class="ContainerIndent">
                            <div class="EmptyBox20"></div>
                            <h:form id="crear">
                                <p:panel id="panelCrear">
                                    <p:growl autoUpdate="true" showDetail="true" life="3000"
                                             globalOnly="true"/>
                                    <p:messages globalOnly="true" styleClass="error"
                                                showSummary="true" showDetail="true"/>

                                    <div class="Container50 Responsive50">
                                        <p:fieldset legend="#{msgs['formCliente']}" style="margin-bottom:20px">
                                            <p:panelGrid columns="2"
                                                         columnClasses="ui-grid-col-3,ui-grid-col-9"
                                                         layout="grid"
                                                         styleClass="ui-panelgrid-blank">
                                                <h:outputLabel value="#{msgs['formBuscarCliente']}:"
                                                               styleClass="FontBold"
                                                               for="clientes"/>

                                                <h:panelGroup>
                                                    <p:autoComplete id="clientes" value="#{creditoBean.entity.cliente}"
                                                                    placeholder="Ingrese código, nombre, apellido o DNI del cliente"
                                                                    completeMethod="#{creditoBean.completeCliente}"
                                                                    var="c" itemLabel="#{c.apellidoNombre}"
                                                                    itemValue="#{c}"
                                                                    converter="clienteConverter" forceSelection="true"
                                                                    required="true"
                                                                    requiredMessage="#{msgs['validationRequired']}">
                                                        <p:column style="width:10%">
                                                            <h:outputText value="#{c.id}"/>
                                                        </p:column>
                                                        <p:column>
                                                            <h:outputText value="#{c.apellidoNombre}"/>
                                                        </p:column>
                                                        <p:column>
                                                            <h:outputText value="#{c.dni}"/>
                                                        </p:column>
                                                        <p:column>
                                                            <h:outputText value="#{c.trabajoDiaCobro}"/>
                                                        </p:column>
                                                    </p:autoComplete>

                                                    <p:message for="clientes"/>
                                                </h:panelGroup>
                                                <p:commandButton id="btnNewCliente" update=":crear:clienteNew"
                                                                 oncomplete="PF('dialogCliente').show()"
                                                                 value="Nuevo cliente"
                                                                 icon="fa fa-user-plus"
                                                                 actionListener="#{creditoBean.cargarCredito(item)}"/>
                                            </p:panelGrid>
                                        </p:fieldset>
                                        <p:fieldset legend="#{msgs['formDatosGarante']}" style="margin-bottom:20px">
                                            <p:panelGrid columns="2"
                                                         columnClasses="ui-grid-col-3,ui-grid-col-9"
                                                         layout="grid"
                                                         styleClass="ui-panelgrid-blank">
                                                <h:outputLabel value="#{msgs['formBuscarGarante']}:"
                                                               styleClass="FontBold"
                                                               for="garantes"/>

                                                <h:panelGroup>
                                                    <p:autoComplete id="garantes" value="#{creditoBean.entity.garante}"
                                                                    placeholder="Ingrese código, nombre, apellido o DNI del garante"
                                                                    completeMethod="#{creditoBean.completeGarante}"
                                                                    var="g" itemLabel="#{g.apellidoNombre}"
                                                                    itemValue="#{g}"
                                                                    converter="garanteConverter" forceSelection="true"
                                                                    required="true"
                                                                    requiredMessage="#{msgs['validationRequired']}">
                                                        <p:column style="width:10%">
                                                            <h:outputText value="#{g.id}"/>
                                                        </p:column>
                                                        <p:column>
                                                            <h:outputText value="#{g.apellidoNombre}"/>
                                                        </p:column>
                                                        <p:column>
                                                            <h:outputText value="#{g.dni}"/>
                                                        </p:column>
                                                        <p:column>
                                                            <h:outputText value="#{g.trabajoDiaCobro}"/>
                                                        </p:column>
                                                    </p:autoComplete>

                                                    <p:message for="garantes"/>
                                                </h:panelGroup>


                                                <p:commandButton id="btnNewGarante" update=":crear:garanteNew"
                                                                 oncomplete="PF('dialogGarante').show()"
                                                                 value="Nuevo garante"
                                                                 icon="fa fa-user-plus"
                                                                 actionListener="#{creditoBean.cargarCredito(item)}"/>
                                            </p:panelGrid>
                                        </p:fieldset>
                                        <p:fieldset legend="#{msgs['formDatosCredito']}" style="margin-bottom:20px">

                                            <p:panelGrid columns="4"
                                                         columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-2,ui-grid-col-4"
                                                         layout="grid"
                                                         styleClass="ui-panelgrid-blank">

                                                <h:outputLabel value="#{msgs['formFechaInicio']}:" styleClass="FontBold"
                                                               for="fechaInicio"/>
                                                <h:panelGroup>
                                                    <p:calendar id="fechaInicio"
                                                                value="#{creditoBean.entity.fechaInicio}"
                                                                required="true"
                                                                requiredMessage="#{msgs['validationRequired']}"/>
                                                    <p:message for="fechaInicio"/>
                                                </h:panelGroup>

                                                <h:outputLabel value="#{msgs['formFechaVencimiento']}:"
                                                               styleClass="FontBold"
                                                               for="fechaVencimiento"/>
                                                <h:panelGroup>
                                                    <h:outputText id="fechaVencimiento"
                                                                  value="#{creditoBean.entity.fechaVencimiento}">
                                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                                    </h:outputText>
                                                </h:panelGroup>

                                                <h:outputLabel value="#{msgs['formCapital']}:" styleClass="FontBold"
                                                               for="capital"/>
                                                <h:panelGroup>
                                                    <p:inputNumber id="capital"
                                                                   required="true"
                                                                   requiredMessage="#{msgs['validationRequired']}"
                                                                   value="#{creditoBean.entity.capital}" symbol="$ "
                                                                   decimalSeparator="," thousandSeparator=".">
                                                    </p:inputNumber>
                                                    <p:message for="capital"/>
                                                </h:panelGroup>

                                                <h:outputLabel value="#{msgs['formEstado']}:" styleClass="FontBold"
                                                               for="estado"/>
                                                <h:panelGroup>
                                                    <p:outputLabel id="estado"
                                                                   value="#{creditoBean.entity.estado.descripcion}"
                                                                   style="padding: 0px 5px 0px 5px;border-radius: 5px;"
                                                                   styleClass="#{creditoBean.entity.estado.backgroundColor} White"/>
                                                </h:panelGroup>

                                                <h:outputLabel value="#{msgs['formCuotas']}:" styleClass="FontBold"
                                                               for="cuotas"/>
                                                <h:panelGroup>
                                                    <p:inputText id="cuotas"
                                                                 required="true"
                                                                 requiredMessage="#{msgs['validationRequired']}"
                                                                 value="#{creditoBean.entity.cuotas}">
                                                    </p:inputText>
                                                    <p:message for="cuotas"/>
                                                </h:panelGroup>


                                                <h:outputLabel value="#{msgs['formCuota']}:" styleClass="FontBold"/>
                                                <h:outputText value="#{creditoBean.entity.montoCutoas}"
                                                              styleClass="FontBold">
                                                    <f:convertNumber type="currency" currencySymbol="$"/>
                                                </h:outputText>

                                                <h:outputLabel value="#{msgs['formInteres']}:" styleClass="FontBold"
                                                               for="interes"/>

                                                <h:panelGroup >
                                                    <p:selectOneMenu id="interes"
                                                                     value="#{creditoBean.entity.interes}"
                                                                     converter="#{interesConverter}"
                                                                     required="true"
                                                                     requiredMessage="#{msgs['validationRequired']}">
                                                        <f:selectItem itemLabel="--Seleccione un Interes--"
                                                                      itemValue="" noSelectionOption="true"/>
                                                        <f:selectItems value="#{creditoBean.intereses}" var="i"
                                                                       itemLabel="#{i.valor} %" itemValue="#{i.valor}"/>

                                                    </p:selectOneMenu>
                                                    <p:message for="interes" />
                                                </h:panelGroup>


                                                <div class="EmptyBox30"></div>
                                                <p:commandButton value="Calcular cuotas" update="crear list"
                                                                 icon="fa fa-calculator"
                                                                 actionListener="#{creditoBean.calcularMontoCuotas}"/>
                                            </p:panelGrid>

                                            <!--
                                                                                          <h:panelGroup>
                                                                                              <p:inputText id="interes"
                                                                                                           required="true"
                                                                                                           requiredMessage="#{msgs['validationRequired']}"
                                                                                                           value="#{creditoBean.entity.interes}">
                                                                                              </p:inputText>
                                                                                              <p:message for="interes"/>
                                                                                          </h:panelGroup> -->
                                        </p:fieldset>
                                    </div>
                                    <div class="Container50 Responsive50" style="margin-top:10px">
                                        <div class="ContainerIndent">
                                            <p:dataTable id="list" var="item" value="#{creditoBean.entity.listCuotas}"
                                                         emptyMessage="No hay cuotas para mostrar"
                                                         rowIndexVar="index" paginator="true" rows="12"
                                                         paginatorPosition="bottom"
                                                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                         rowsPerPageTemplate="6,12,24,36,48" sortBy="#{item.nro}">
                                                <f:facet name="header">
                                                    <h:outputText value="#{msgs['cuotas']}"/>
                                                    <ui:include src="/pages/includes/exporterButtons.xhtml">
                                                        <ui:param name="target" value="list" />
                                                        <ui:param name="fileName"
                                                                  value="Reporte cuotas" />
                                                    </ui:include>

                                                </f:facet>
                                                <p:column headerText="Período">
                                                    <h:outputText value="#{item.nro}"/>

                                                </p:column>
                                                <p:column headerText="#{msgs['formFechaVencimiento']}">
                                                    <h:outputText value="#{item.fechaVencimiento}">
                                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                                    </h:outputText>
                                                </p:column>
                                                <p:column headerText="Cuota capital">
                                                    <h:outputText value="#{item.cuotaCapital}">
                                                        <f:convertNumber type="currency" currencySymbol="$"/>
                                                    </h:outputText>
                                                </p:column>
                                                <p:column headerText="Cuota interes">
                                                    <h:outputText value="#{item.cuotaInteres}">
                                                        <f:convertNumber type="currency" currencySymbol="$"/>
                                                    </h:outputText>
                                                </p:column>
                                                <p:column headerText="Saldo">
                                                    <h:outputText value="#{item.saldo}">
                                                        <f:convertNumber type="currency" currencySymbol="$"/>
                                                    </h:outputText>
                                                </p:column>
                                            </p:dataTable>
                                        </div>
                                    </div>

                                    <div class="EmptyBox30"></div>
                                    <div class="Fright">
                                        <div class="Wid45 Fleft Responsive45 MarRight10">
                                            <p:commandButton value="#{msgs['btnCancelar']}"
                                                             icon="fa fa-close"
                                                             styleClass="RedButton Fs16 White RaisedButton Fleft FloatNoneOnMobile"
                                                             action="search?faces-redirect=true"
                                                             title="#{msgs['btnCancelar']}" immediate="true"/>
                                        </div>
                                        <div class="Wid45 Fleft Responsive45">
                                            <p:commandButton id="linksave" value="#{msgs['btnGuardar']}"
                                                             icon="fa fa-save"
                                                             styleClass="GreenButton Fs16 White Fright FloatNoneOnMobile"
                                                             action="#{creditoBean.update}" title="Grabar"
                                                             update="crear" validateClient="true"/>
                                        </div>
                                    </div>
                                </p:panel>
                                <!-- PANEL ALTA DE CLIENTE -->
                                <p:dialog widgetVar="dialogCliente" showEffect="slide"
                                          dynamic="true" modal="true" hideEffect="slide" dismissable="true"
                                          showCloseIcon="true" position="left" width="800px"
                                          fitViewport="true" height="700px" closeOnEscape="true"
                                          draggable="false" header="Alta  de cliente">
                                    <p:outputPanel id="clienteNew" style="text-align:center;">

                                        <h:panelGroup >
                                            <h:form id="crearCliente">
                                                <p:panel id="panelCrearCliente">
                                                    <p:growl autoUpdate="true" showDetail="true" life="3000"
                                                             globalOnly="true"/>
                                                    <p:messages globalOnly="true" styleClass="error"
                                                                showSummary="true" showDetail="true"/>
                                                    <p:fieldset legend="Datos Personales" style="margin-bottom:20px">
                                                        <p:panelGrid columns="2" class="ui-grid-col-6"
                                                                     columnClasses="ui-grid-col-4,ui-grid-col-4" layout="grid"
                                                                     styleClass="ui-panelgrid-blank">

                                                            <p:outputLabel for="nombreCliente" value="#{msgs['formNombre']}:" styleClass="FontBold"/>
                                                            <p:outputLabel for="apellidoCliente" value="#{msgs['formApellido']}:" styleClass="FontBold"/>
                                                            <h:panelGroup layout="block">
                                                                <p:inputText id="nombreCliente"
                                                                             required="true"
                                                                             requiredMessage="#{msgs['validationRequired']}"
                                                                             value="#{clienteBean.entity.nombre}"
                                                                             placeholder="Ej: Juan">
                                                                </p:inputText>
                                                                <p:message for="nombreCliente"/>
                                                            </h:panelGroup>
                                                            <h:panelGroup layout="block">
                                                                <p:inputText id="apellidoCliente"
                                                                             required="true"
                                                                             requiredMessage="#{msgs['validationRequired']}"
                                                                             validatorMessage="Formato invalido"
                                                                             value="#{clienteBean.entity.apellido}"
                                                                             placeholder="Ej: Perez">
                                                                </p:inputText>
                                                                <p:message for="apellidoCliente"/>
                                                            </h:panelGroup>
                                                            <p:outputLabel for="dniCliente" value="#{msgs['formDni']}:" styleClass="FontBold"/>
                                                            <p:outputLabel for="telefonoCliente" value="#{msgs['formTelefono']}:" styleClass="FontBold"/>
                                                            <h:panelGroup layout="block">
                                                                <p:inputText id="dniCliente"
                                                                             type="number"
                                                                             required="true"
                                                                             requiredMessage="#{msgs['validationRequired']}"
                                                                             value="#{clienteBean.entity.dni}"
                                                                             placeholder="Ej: 35745346">
                                                                </p:inputText>
                                                                <p:message for="dniCliente"/>
                                                            </h:panelGroup>
                                                            <h:panelGroup layout="block">
                                                                <p:inputText id="telefonoCliente"
                                                                             type="number"
                                                                             value="#{clienteBean.entity.telefono}"
                                                                             placeholder="Ej: 425865">
                                                                </p:inputText>
                                                            </h:panelGroup>
                                                            <p:outputLabel for="celularCliente" value="#{msgs['formCelular']}:" styleClass="FontBold"/>
                                                            <p:outputLabel for="direccionCliente" value="#{msgs['formDireccion']}:" styleClass="FontBold"/>
                                                            <h:panelGroup layout="block">
                                                                <p:inputText id="celularCliente"
                                                                             type="number"
                                                                             required="true"
                                                                             requiredMessage="#{msgs['validationRequired']}"
                                                                             value="#{clienteBean.entity.celular}"
                                                                             placeholder="Ej: 2920 553245">
                                                                </p:inputText>
                                                                <p:message for="celularCliente"/>
                                                            </h:panelGroup>
                                                            <h:panelGroup layout="block">
                                                                <p:inputText id="direccionCliente"
                                                                             required="true"
                                                                             requiredMessage="#{msgs['validationRequired']}"
                                                                             value="#{clienteBean.entity.domicilio}"
                                                                             placeholder="Ej: Colon 345">
                                                                </p:inputText>
                                                                <p:message for="celularCliente"/>
                                                            </h:panelGroup>
                                                            <p:outputLabel for="provinciaCliente"
                                                                           value="#{msgs['form.provincia']}:"/>
                                                            <p:outputLabel for="ciudadesCliente"
                                                                           value="#{msgs['form.ciudad']}"/>
                                                            <h:panelGroup layout="block">
                                                                <p:selectOneMenu id="provinciaCliente"
                                                                                 value="#{clienteBean.provinciaSelecionada.id}"
                                                                                 converter="#{provinciaConverter}"
                                                                                 required="true"
                                                                                 requiredMessage="#{msgs['validationRequired']}">
                                                                    <f:selectItem itemLabel="--Seleccione una Provincia--"
                                                                                  itemValue="" noSelectionOption="true"/>
                                                                    <f:selectItems value="#{clienteBean.provincias}" var="p"
                                                                                   itemLabel="#{p.nombre}" itemValue="#{p.id}"/>
                                                                    <p:ajax update="ciudadesCliente"
                                                                            listener="#{clienteBean.onProvinciaChange}"/>
                                                                </p:selectOneMenu>
                                                                <p:message for="provinciaCliente" styleClass="alert alert-danger"/>
                                                            </h:panelGroup>
                                                            <h:panelGroup layout="block">
                                                                <p:selectOneMenu id="ciudadesCliente"
                                                                                 value="#{clienteBean.ciudadSelecionada.id}"
                                                                                 converter="#{ciudadConverter}" required="true"
                                                                                 requiredMessage="#{msgs['validationRequired']}">
                                                                    <f:selectItem itemLabel="--Seleccione una Ciudad--"
                                                                                  itemValue="" noSelectionOption="true"/>
                                                                    <f:selectItems value="#{clienteBean.ciudades}" var="c"
                                                                                   itemLabel="#{c.nombre}" itemValue="#{c.id}"/>

                                                                </p:selectOneMenu>
                                                                <p:message for="ciudadesCliente" styleClass="alert alert-danger"/>
                                                            </h:panelGroup>
                                                            <p:outputLabel for="observacionesCliente" value="#{msgs['formObservaciones']}:" styleClass="FontBold"/>
                                                            <div class="EmptyBox20"></div>
                                                            <h:panelGroup layout="block">
                                                                <p:inputTextarea rows="5" cols="30" counter="displayCliente" maxlength="300"
                                                                                 counterTemplate="{0} caracteres restantes."
                                                                                 autoResize="false" id="observacionesCliente"
                                                                                 placeholder="Ingrese una observación"
                                                                                 requiredMessage="#{msgs['validationRequired']}"
                                                                                 value="#{clienteBean.entity.observacion}"/>
                                                                <h:outputText id="displayCliente"/>
                                                            </h:panelGroup>
                                                            <p:message for="observacionesCliente"/>

                                                        </p:panelGrid>
                                                    </p:fieldset>
                                                    <p:fieldset legend="#{msgs['formDatosLaborales']}:" style="margin-bottom:20px">
                                                        <p:panelGrid columns="2"
                                                                     columnClasses="ui-grid-col-4,ui-grid-col-4" layout="grid"
                                                                     styleClass="ui-panelgrid-blank">
                                                            <p:outputLabel for="lugarCliente" value="#{msgs['formLugarLaboral']}:" styleClass="FontBold"/>
                                                            <p:outputLabel for="horarioCliente" value="#{msgs['formHorarioLaboral']}:" styleClass="FontBold"/>
                                                            <h:panelGroup layout="block">
                                                                <p:inputText id="lugarCliente"
                                                                             required="true"
                                                                             placeholder="Ej: Ministerio de Educación"
                                                                             requiredMessage="#{msgs['validationRequired']}"
                                                                             value="#{clienteBean.entity.trabajoLugar}">
                                                                </p:inputText>
                                                                <p:message for="lugarCliente"/>

                                                            </h:panelGroup>
                                                            <h:panelGroup layout="block">
                                                                <p:inputMask id="horarioCliente" required="true"
                                                                             placeholder="Ej: 08:00 -- 15:00"
                                                                             requiredMessage="#{msgs['validationRequired']}"
                                                                             value="#{clienteBean.entity.trabajoHorario}"
                                                                             mask="99:99--99:99"/>

                                                                <p:message for="horarioCliente"/>
                                                            </h:panelGroup>
                                                            <h:panelGroup layout="block">
                                                                <p:outputLabel for="telefonoTrabajoCliente" value="#{msgs['formTelefonoLaboral']}:" styleClass="FontBold"/>
                                                                <p:inputText id="telefonoTrabajoCliente"
                                                                             type="number"
                                                                             required="true"
                                                                             requiredMessage="#{msgs['validationRequired']}"
                                                                             value="#{clienteBean.entity.trabajoTelefono}"
                                                                             placeholder="Ej: 2920 553245">
                                                                </p:inputText>
                                                            </h:panelGroup>
                                                            <div class="EmptyBox20"></div>
                                                            <h:panelGroup layout="block">
                                                                <p:outputLabel for="fechaCobroCliente" value="#{msgs['formFechaCobro']}:" styleClass="FontBold"/>
                                                                <p:spinner id="fechaCobroCliente" required="true"
                                                                           requiredMessage="#{msgs['validationRequired']}"
                                                                           value="#{clienteBean.entity.trabajoDiaCobro}" min="1"
                                                                           max="31"
                                                                />
                                                            </h:panelGroup>
                                                            <h:panelGroup layout="block" style="    margin-top: 7%;">
                                                                <h:outputText value="Ingrese el día aproximado de cobro"></h:outputText>
                                                            </h:panelGroup>
                                                        </p:panelGrid>
                                                    </p:fieldset>
                                                    <p:fieldset legend="#{msgs['formDocumentos']}:" style="margin-bottom:20px">
                                                        <p:panelGrid columns="2"
                                                                     columnClasses="ui-grid-col-4,ui-grid-col-4" layout="grid"
                                                                     styleClass="ui-panelgrid-blank">
                                                            <h:outputText value="#{msgs['formDNI']}:" styleClass="FontBold"/>
                                                            <p:selectBooleanCheckbox value="#{clienteBean.entity.fotocopiaDni}">
                                                            </p:selectBooleanCheckbox>
                                                            <h:outputText value="#{msgs['formRecibo']}:" styleClass="FontBold"/>
                                                            <p:selectBooleanCheckbox value="#{clienteBean.entity.recibo}">
                                                            </p:selectBooleanCheckbox>
                                                            <h:outputText value="#{msgs['formServicio']}:" styleClass="FontBold"/>
                                                            <p:selectBooleanCheckbox value="#{clienteBean.entity.servicio}">
                                                            </p:selectBooleanCheckbox>
                                                        </p:panelGrid>
                                                    </p:fieldset>
                                                    <div class="EmptyBox30"></div>
                                                    <div class="Fright">
                                                        <div class="Wid45 Fleft Responsive45 MarRight10">
                                                            <p:commandButton value="#{msgs['btnCancelar']}"
                                                                             icon="fa fa-close"
                                                                             styleClass="RedButton Fs16 White RaisedButton Fleft FloatNoneOnMobile"
                                                                             action="search?faces-redirect=true"
                                                                             title="#{msgs['btnCancelar']}" immediate="true"/>
                                                        </div>
                                                        <div class="Wid45 Fleft Responsive45">
                                                            <p:commandButton id="linksaveCliente" value="#{msgs['btnGuardar']}"
                                                                             icon="fa fa-sign-in"
                                                                             process="@form"
                                                                             styleClass="GreenButton Fs16 White Fright FloatNoneOnMobile"
                                                                             action="#{clienteBean.update}" title="Guardar"
                                                                             update="crearCliente" validateClient="true"/>
                                                        </div>
                                                    </div>
                                                </p:panel>
                                            </h:form>


                                        </h:panelGroup>


                                    </p:outputPanel>

                                </p:dialog>

                                <!-- PANEL ALTA DE GARANTE -->
                                <p:dialog widgetVar="dialogGarante" showEffect="slide"
                                          dynamic="true" modal="true" hideEffect="slide" dismissable="true"
                                          showCloseIcon="true" position="left" width="800px"
                                          fitViewport="true" height="700px" closeOnEscape="true"
                                          draggable="false" header="Alta  de garante">
                                    <p:outputPanel id="garanteNew" style="text-align:center;">

                                        <h:panelGroup id="detalleCredito">
                                            <h:form id="crearGarante">
                                                <p:panel id="panelCrearGarante">
                                                    <p:growl autoUpdate="true" showDetail="true" life="3000"
                                                             globalOnly="true"/>
                                                    <p:messages globalOnly="true" styleClass="error"
                                                                showSummary="true" showDetail="true"/>
                                                    <p:fieldset legend="Datos Personales" style="margin-bottom:20px">
                                                        <p:panelGrid columns="2" class="ui-grid-col-6"
                                                                     columnClasses="ui-grid-col-4,ui-grid-col-4" layout="grid"
                                                                     styleClass="ui-panelgrid-blank">

                                                            <p:outputLabel for="nombre" value="#{msgs['formNombre']}:" styleClass="FontBold"/>
                                                            <p:outputLabel for="apellido" value="#{msgs['formApellido']}:" styleClass="FontBold"/>
                                                            <h:panelGroup layout="block">
                                                                <p:inputText id="nombre"
                                                                             required="true"
                                                                             requiredMessage="#{msgs['validationRequired']}"
                                                                             value="#{garanteBean.entity.nombre}"
                                                                             placeholder="Ej: Juan">
                                                                </p:inputText>
                                                                <p:message for="nombre"/>
                                                            </h:panelGroup>
                                                            <h:panelGroup layout="block">
                                                                <p:inputText id="apellido"
                                                                             required="true"
                                                                             requiredMessage="#{msgs['validationRequired']}"
                                                                             validatorMessage="Formato invalido"
                                                                             value="#{garanteBean.entity.apellido}"
                                                                             placeholder="Ej: Perez">
                                                                </p:inputText>
                                                                <p:message for="apellido"/>
                                                            </h:panelGroup>
                                                            <p:outputLabel for="dni" value="#{msgs['formDni']}:" styleClass="FontBold"/>
                                                            <p:outputLabel for="telefono" value="#{msgs['formTelefono']}:" styleClass="FontBold"/>
                                                            <h:panelGroup layout="block">
                                                                <p:inputText id="dni"
                                                                             type="number"
                                                                             required="true"
                                                                             requiredMessage="#{msgs['validationRequired']}"
                                                                             value="#{garanteBean.entity.dni}"
                                                                             placeholder="Ej: 35745346">
                                                                </p:inputText>
                                                                <p:message for="dni"/>
                                                            </h:panelGroup>
                                                            <h:panelGroup layout="block">
                                                                <p:inputText id="telefono"
                                                                             type="number"
                                                                             value="#{garanteBean.entity.telefono}"
                                                                             placeholder="Ej: 425865">
                                                                </p:inputText>
                                                            </h:panelGroup>
                                                            <p:outputLabel for="celular" value="#{msgs['formCelular']}:" styleClass="FontBold"/>
                                                            <p:outputLabel for="direccion" value="#{msgs['formDireccion']}:" styleClass="FontBold"/>
                                                            <h:panelGroup layout="block">
                                                                <p:inputText id="celular"
                                                                             type="number"
                                                                             required="true"
                                                                             requiredMessage="#{msgs['validationRequired']}"
                                                                             value="#{garanteBean.entity.celular}"
                                                                             placeholder="Ej: 2920 553245">
                                                                </p:inputText>
                                                                <p:message for="celular"/>
                                                            </h:panelGroup>
                                                            <h:panelGroup layout="block">
                                                                <p:inputText id="direccion"
                                                                             required="true"
                                                                             requiredMessage="#{msgs['validationRequired']}"
                                                                             value="#{garanteBean.entity.domicilio}"
                                                                             placeholder="Ej: Colon 345">
                                                                </p:inputText>
                                                                <p:message for="celular"/>
                                                            </h:panelGroup>
                                                            <p:outputLabel for="provincia"
                                                                           value="#{msgs['form.provincia']}:"/>
                                                            <p:outputLabel for="ciudades"
                                                                           value="#{msgs['form.ciudad']}"/>
                                                            <h:panelGroup layout="block">
                                                                <p:selectOneMenu id="provincia"
                                                                                 value="#{garanteBean.provinciaSelecionada.id}"
                                                                                 converter="#{provinciaConverter}"
                                                                                 required="true"
                                                                                 requiredMessage="#{msgs['validationRequired']}">
                                                                    <f:selectItem itemLabel="--Seleccione una Provincia--"
                                                                                  itemValue="" noSelectionOption="true"/>
                                                                    <f:selectItems value="#{garanteBean.provincias}" var="p"
                                                                                   itemLabel="#{p.nombre}" itemValue="#{p.id}"/>
                                                                    <p:ajax update="ciudades"
                                                                            listener="#{garanteBean.onProvinciaChange}"/>
                                                                </p:selectOneMenu>
                                                                <p:message for="provincia" styleClass="alert alert-danger"/>
                                                            </h:panelGroup>
                                                            <h:panelGroup layout="block">
                                                                <p:selectOneMenu id="ciudades"
                                                                                 value="#{garanteBean.ciudadSelecionada.id}"
                                                                                 converter="#{ciudadConverter}" required="true"
                                                                                 requiredMessage="#{msgs['validationRequired']}">
                                                                    <f:selectItem itemLabel="--Seleccione una Ciudad--"
                                                                                  itemValue="" noSelectionOption="true"/>
                                                                    <f:selectItems value="#{garanteBean.ciudades}" var="c"
                                                                                   itemLabel="#{c.nombre}" itemValue="#{c.id}"/>

                                                                </p:selectOneMenu>
                                                                <p:message for="ciudades" styleClass="alert alert-danger"/>
                                                            </h:panelGroup>
                                                            <p:outputLabel for="observaciones" value="#{msgs['formObservaciones']}:" styleClass="FontBold"/>
                                                            <div class="EmptyBox20"></div>
                                                            <h:panelGroup layout="block">
                                                                <p:inputTextarea rows="5" cols="30" counter="display" maxlength="300"
                                                                                 counterTemplate="{0} caracteres restantes."
                                                                                 autoResize="false" id="observaciones"
                                                                                 placeholder="Ingrese una observación"
                                                                                 requiredMessage="#{msgs['validationRequired']}"
                                                                                 value="#{garanteBean.entity.observacion}"/>
                                                                <h:outputText id="display"/>
                                                            </h:panelGroup>
                                                            <p:message for="observaciones"/>

                                                        </p:panelGrid>
                                                    </p:fieldset>
                                                    <p:fieldset legend="#{msgs['formDatosLaborales']}:" style="margin-bottom:20px">
                                                        <p:panelGrid columns="2"
                                                                     columnClasses="ui-grid-col-4,ui-grid-col-4" layout="grid"
                                                                     styleClass="ui-panelgrid-blank">
                                                            <p:outputLabel for="lugar" value="#{msgs['formLugarLaboral']}:" styleClass="FontBold"/>
                                                            <p:outputLabel for="horario" value="#{msgs['formHorarioLaboral']}:" styleClass="FontBold"/>
                                                            <h:panelGroup layout="block">
                                                                <p:inputText id="lugar"
                                                                             required="true"
                                                                             placeholder="Ej: Ministerio de Educación"
                                                                             requiredMessage="#{msgs['validationRequired']}"
                                                                             value="#{garanteBean.entity.trabajoLugar}">
                                                                </p:inputText>
                                                                <p:message for="lugar"/>

                                                            </h:panelGroup>
                                                            <h:panelGroup layout="block">
                                                                <p:inputMask id="horario" required="true"
                                                                             placeholder="Ej: 08:00 -- 15:00"
                                                                             requiredMessage="#{msgs['validationRequired']}"
                                                                             value="#{garanteBean.entity.trabajoHorario}"
                                                                             mask="99:99--99:99"/>

                                                                <p:message for="horario"/>
                                                            </h:panelGroup>
                                                            <h:panelGroup layout="block">
                                                                <p:outputLabel for="telefonoTrabajo" value="#{msgs['formTelefonoLaboral']}:" styleClass="FontBold"/>
                                                                <p:inputText id="telefonoTrabajo"
                                                                             type="number"
                                                                             required="true"
                                                                             requiredMessage="#{msgs['validationRequired']}"
                                                                             value="#{garanteBean.entity.trabajoTelefono}"
                                                                             placeholder="Ej: 2920 553245">
                                                                </p:inputText>
                                                            </h:panelGroup>
                                                            <div class="EmptyBox20"></div>
                                                            <h:panelGroup layout="block">
                                                                <p:outputLabel for="fechaCobro" value="#{msgs['formFechaCobro']}:" styleClass="FontBold"/>
                                                                <p:spinner id="fechaCobro" required="true"
                                                                           requiredMessage="#{msgs['validationRequired']}"
                                                                           value="#{garanteBean.entity.trabajoDiaCobro}" min="1"
                                                                           max="31"
                                                                />
                                                            </h:panelGroup>
                                                            <h:panelGroup layout="block" style="    margin-top: 7%;">
                                                                <h:outputText value="Ingrese el día aproximado de cobro"></h:outputText>
                                                            </h:panelGroup>
                                                        </p:panelGrid>
                                                    </p:fieldset>
                                                    <p:fieldset legend="#{msgs['formDocumentos']}:" style="margin-bottom:20px">
                                                        <p:panelGrid columns="2"
                                                                     columnClasses="ui-grid-col-4,ui-grid-col-4" layout="grid"
                                                                     styleClass="ui-panelgrid-blank">
                                                            <h:outputText value="#{msgs['formDNI']}:" styleClass="FontBold"/>
                                                            <p:selectBooleanCheckbox value="#{garanteBean.entity.fotocopiaDni}">
                                                            </p:selectBooleanCheckbox>
                                                            <h:outputText value="#{msgs['formRecibo']}:" styleClass="FontBold"/>
                                                            <p:selectBooleanCheckbox value="#{garanteBean.entity.recibo}">
                                                            </p:selectBooleanCheckbox>
                                                            <h:outputText value="#{msgs['formServicio']}:" styleClass="FontBold"/>
                                                            <p:selectBooleanCheckbox value="#{garanteBean.entity.servicio}">
                                                            </p:selectBooleanCheckbox>
                                                        </p:panelGrid>
                                                    </p:fieldset>
                                                    <div class="EmptyBox30"></div>
                                                    <div class="Fright">
                                                        <div class="Wid45 Fleft Responsive45 MarRight10">
                                                            <p:commandButton value="#{msgs['btnCancelar']}"
                                                                             icon="fa fa-close"
                                                                             styleClass="RedButton Fs16 White RaisedButton Fleft FloatNoneOnMobile"
                                                                             action="search?faces-redirect=true"
                                                                             title="#{msgs['btnCancelar']}" immediate="true"/>
                                                        </div>
                                                        <div class="Wid45 Fleft Responsive45">
                                                            <p:commandButton id="linksavegarante" value="#{msgs['btnGuardar']}"
                                                                             icon="fa fa-sign-in"
                                                                             process="@form"
                                                                             styleClass="GreenButton Fs16 White Fright FloatNoneOnMobile"
                                                                             action="#{garanteBean.update}" title="Guardar"
                                                                             update="crearGarante" validateClient="true"/>
                                                        </div>
                                                    </div>
                                                </p:panel>
                                            </h:form>


                                        </h:panelGroup>


                                    </p:outputPanel>

                                </p:dialog>
                            </h:form>

                        </div>
                    </div>
                </div>
            </div>
        </div>

    </ui:define>


</ui:composition>
</html>
