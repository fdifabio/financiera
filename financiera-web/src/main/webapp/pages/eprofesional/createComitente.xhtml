<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
<h:form id="crearcomitente">
        <p:dialog header="Nuevo comitente" widgetVar="dlg2" resizable="false"
                  height="450" closable="true" cellpadding="5"
                  draggable="false" modal="true" scrollable="true">
            <h:panelGrid columns="2" styleClass="ui-panelgrid-blank"
                         layout="grid">
                <h:outputLabel for="empresa" value="#{msgs['form.empresa']}"/>
                <h:panelGroup>
                    <p:inputSwitch id="empresa"
                                   value="#{eprofesionalBean.comitente.empresa}"
                                   required="true"
                                   requiredMessage="#{msgs['validationRequired']}"
                                   onLabel="Si" offLabel="No" style="width:60px">
                        <f:ajax event="change" render="form"/>
                    </p:inputSwitch>
                    <p:message for="empresa"/>
                </h:panelGroup>
                <h:panelGroup id="form">
                    <h:outputLabel rendered="#{eprofesionalBean.comitente.isEmpresa()}"
                                   for="cnombre"
                                   value="#{msgs['form.empresa']}"/>
                    <h:outputLabel rendered="#{!eprofesionalBean.comitente.isEmpresa()}"
                                   for="cnombre"
                                   value="#{msgs['form.nombre.apellido']}"/>
                    <h:panelGroup>
                        <p:inputText id="cnombre"
                                     value="#{eprofesionalBean.comitente.nombre}"
                                     required="true"
                                     requiredMessage="#{msgs['validationRequired']}"/>
                        <p:message for="cnombre"/>
                    </h:panelGroup>
                    <h:outputLabel rendered="#{eprofesionalBean.comitente.isEmpresa()}"
                                   for="cuit"
                                   value="#{msgs['form.cuit']}"/>
                    <h:outputLabel rendered="#{!eprofesionalBean.comitente.isEmpresa()}"
                                   for="cuit"
                                   value="#{msgs['form.cuil']}"/>
                    <h:panelGroup>
                        <p:inputMask id="cuit" value="#{eprofesionalBean.comitente.cuit}"
                                     required="true" mask="99-99999999-9"
                                     requiredMessage="#{msgs['validationRequired']}"/>
                        <p:message for="cuit"/>
                    </h:panelGroup>
                    <h:outputLabel for="domicilio" value="#{msgs['form.domicilio']}"/>
                    <h:panelGroup>
                        <p:inputText id="domicilio"
                                     value="#{eprofesionalBean.comitente.domicilio}"
                                     required="true"
                                     requiredMessage="#{msgs['validationRequired']}"/>
                        <p:message for="domicilio"/>
                    </h:panelGroup>
                    <h:outputText value="#{msgs['form.ciudad']}:"/>
                    <h:panelGroup>
                        <p:selectOneMenu id="ciudad"
                                         value="#{eprofesionalBean.ciudadComitenteSelecionada}"
                                         converter="#{eprofesionalBean.ciudadComitenteConvert}"
                                         required="true"
                                         requiredMessage="#{msgs['validationRequired']}">
                            <f:selectItem itemLabel="--Seleccione una ciudad--"
                                          itemValue="-1"/>
                            <f:selectItems value="#{eprofesionalBean.listCiudades()}" var="c"
                                           itemLabel="#{c.nombre}" itemValue="#{c}"/>
                        </p:selectOneMenu>
                        <p:message for="ciudad"/>
                    </h:panelGroup>
                    <h:outputLabel rendered="#{eprofesionalBean.comitente.isEmpresa()}"
                                   for="resp"
                                   value="#{msgs['formResponsableNombre']}"/>
                    <h:panelGroup rendered="#{eprofesionalBean.comitente.isEmpresa()}">
                        <p:inputText id="resp" required="true"
                                     value="#{eprofesionalBean.comitente.responsable.nombre}"
                                     requiredMessage="#{msgs['validationRequired']}"/>
                        <p:message for="resp"/>
                    </h:panelGroup>
                    <h:outputLabel for="resp_contacto"
                                   value="#{msgs['formResponsableContacto']}"/>
                    <h:panelGroup>
                        <p:inputText id="resp_contacto"
                                     value="#{eprofesionalBean.comitente.responsable.email}"
                                     required="true"
                                     validatorMessage="Formato invalido"
                                     requiredMessage="#{msgs['validationRequired']}">
                            <f:validateRegex
                                    pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$"/>
                        </p:inputText>
                        <p:message for="resp_contacto"/>
                    </h:panelGroup>
                </h:panelGroup>
            </h:panelGrid>
            <div class="Wid45 Fright Responsive45">
                <p:commandButton value="#{msgs['btnGuardar']}"
                                 icon="fa fa-sign-in"
                                 styleClass="GreenButton Fs16 White Fright FloatNoneOnMobile "
                                 actionListener="#{eprofesionalBean.vaciarComitente()}"
                                 title="Grabar"
                                 update="crear:comitentegroup"
                                 validateClient="true"
                                 oncomplete="handleLoginRequest(xhr, status, args)"/>
            </div>
        </p:dialog>
    </h:form>
</html>