<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:sec="http://www.springframework.org/security/facelets/tags">
<ui:composition template="/templates/template.xhtml">

    <ui:define name="subheader">

    </ui:define>

    <f:metadata>
        <f:viewParam name="id" value="#{eprofesionalBean.id}"/>
        <f:event type="preRenderView" listener="#{eprofesionalBean.inicio()}"/>
    </f:metadata>

    <ui:define name="actions">

        <a href="search.jsf"
           class="BoldGray Fs20 FontRobotoLight Fright MarRight20 HoverEffect"><i
                class="icon-list"></i> #{msgs['listar']}</a>
        <sec:ifAnyGranted roles="ROLE_AGR">
            <h:panelGroup rendered="#{eprofesionalBean.entity.isPendiente()}" id="modificarLink">
                <a href="create.jsf?id=#{eprofesionalBean.entity.id}"
                   class="BoldGray Fs20 FontRobotoLight Fright MarRight20 HoverEffect"><i
                        class="icon-edit"></i> #{msgs['btn.modificar']}</a>
            </h:panelGroup>
            <a href="create.jsf"
               class="BoldGray Fs20 FontRobotoLight Fright MarRight20 HoverEffect"><i
                    class="icon-person_add"></i>  #{msgs['btnNuevoEncomienda']}</a>
        </sec:ifAnyGranted>
    </ui:define>

    <ui:define name="content">
        <div class="Container100 ui-fluid">
            <div class="ContainerIndent">
                <div class="Card ShadowEffect">
                    <h:form>
                        <p:panel header=" #{msgs['formEProfesionalDetalle']}"
                                 style="margin-top:20px">
                            <p:fieldset legend="#{msgs['formEProfesional']}">
                                <p:panelGrid columns="2"
                                             columnClasses="ui-grid-col-4,ui-grid-col-8" layout="grid"
                                             styleClass="ui-panelgrid-blank">
                                    <h:outputText value="#{msgs['form.descripcion']}:" styleClass="FontBold"/>
                                    <h:outputText value="#{eprofesionalBean.entity.nombre}"/>
                                    <h:outputText value="#{msgs['formFecha']}:" styleClass="FontBold"/>
                                    <h:outputText value="#{eprofesionalBean.entity.fecha}">
                                        <f:convertDateTime pattern="#{eprofesionalBean.patternDate}"/>
                                    </h:outputText>
                                    <h:outputText value="#{msgs['formNomenclatura']}:" styleClass="FontBold"/>
                                    <h:outputText value="#{eprofesionalBean.entity.nomenclatura}"/>
                                    <h:outputText value="#{msgs['formEstado']}:" styleClass="FontBold"/>
                                    <h:outputText value="#{eprofesionalBean.entity.estado.estado}"/>

                                </p:panelGrid>
                            </p:fieldset>
                            <p:fieldset legend="#{msgs['form.comitente']}">
                                <p:panelGrid columns="2"
                                             columnClasses="ui-grid-col-4,ui-grid-col-8" layout="grid"
                                             styleClass="ui-panelgrid-blank">
                                    <h:outputText rendered="#{!eprofesionalBean.entity.comitente.empresa}"
                                                  value="#{msgs['form.particular']}" styleClass="FontBold"/>
                                    <h:outputText rendered="#{eprofesionalBean.entity.comitente.empresa}"
                                                  value="#{msgs['form.empresa']}" styleClass="FontBold"/>
                                    <h:outputText value="#{eprofesionalBean.entity.comitente.nombre}"/>

                                    <h:outputText rendered="#{!eprofesionalBean.entity.comitente.empresa}"
                                                  value="#{msgs['form.cuit']}:" styleClass="FontBold"/>
                                    <h:outputText rendered="#{eprofesionalBean.entity.comitente.empresa}"
                                                  value="#{msgs['form.cuil']}:" styleClass="FontBold"/>
                                    <h:outputText value="#{eprofesionalBean.entity.comitente.cuit}"/>

                                    <h:outputText value="#{msgs['form.domicilio']}:" styleClass="FontBold"/>
                                    <h:outputText value="#{eprofesionalBean.entity.comitente.domicilio}"/>

                                    <h:outputText value="#{msgs['form.ciudad']}:" styleClass="FontBold"/>
                                    <h:outputText value="#{eprofesionalBean.entity.comitente.ciudad.nombre}"/>

                                    <h:outputText value="#{msgs['form.departamento']}:" styleClass="FontBold"/>
                                    <h:outputText
                                            value="#{eprofesionalBean.entity.comitente.ciudad.departamento.nombre}"/>

                                    <h:outputText value="#{msgs['form.provincia']}:" styleClass="FontBold"/>
                                    <h:outputText
                                            value="#{eprofesionalBean.entity.comitente.ciudad.departamento.provincia.nombre}"/>

                                    <h:outputText rendered="#{eprofesionalBean.entity.comitente.empresa}"
                                                  value="#{msgs['formResponsable']}:" styleClass="FontBold"/>
                                    <h:outputText rendered="#{eprofesionalBean.entity.comitente.empresa}"
                                                  value="#{eprofesionalBean.entity.comitente.responsable.nombre}"/>

                                    <h:outputText rendered="#{eprofesionalBean.entity.comitente.empresa}"
                                                  value="#{msgs['formContacto']}:" styleClass="FontBold"/>
                                    <h:outputText rendered="#{eprofesionalBean.entity.comitente.empresa}"
                                                  value="#{eprofesionalBean.entity.comitente.responsable.email}"/>
                                </p:panelGrid>
                            </p:fieldset>
                            <p:fieldset legend="#{msgs['form.inmueble']}">
                                <p:panelGrid columns="2"
                                             columnClasses="ui-grid-col-4,ui-grid-col-8" layout="grid"
                                             styleClass="ui-panelgrid-blank">
                                    <h:outputText value="#{msgs['formTipo']}:" styleClass="FontBold"/>
                                    <h:outputText value="#{eprofesionalBean.entity.inmueble.tipo.tipo}"/>

                                    <h:outputText
                                            rendered="#{eprofesionalBean.entity.isInmuebleRural()}"
                                            value="#{msgs['form.departamento']}:"
                                            styleClass="FontBold"/>
                                    <h:outputText
                                            rendered="#{eprofesionalBean.entity.isInmuebleRural()}"
                                            value="#{eprofesionalBean.entity.inmueble.departamento.nombre}"/>

                                    <h:outputText
                                            rendered="#{eprofesionalBean.entity.isInmuebleUrbanoSubUrbano()}"
                                            value="#{msgs['form.localidad']}:" styleClass="FontBold"/>
                                    <h:outputText
                                            rendered="#{eprofesionalBean.entity.isInmuebleUrbanoSubUrbano()}"
                                            value="#{eprofesionalBean.entity.inmueble.ciudad.nombre}"/>
                                </p:panelGrid>
                            </p:fieldset>
                            <p:fieldset legend="#{msgs['tareaProfesional']}">
                                <p:panelGrid columns="2"
                                             columnClasses="ui-grid-col-4,ui-grid-col-8" layout="grid"
                                             styleClass="ui-panelgrid-blank">
                                    <h:outputText value="#{msgs['form.descripcion']}:" styleClass="FontBold"/>
                                    <h:outputText value="#{eprofesionalBean.entity.tasaDescripcion}"/>
                                    <h:outputText value="#{msgs['formUnidades']}:" styleClass="FontBold"/>
                                    <h:outputText value="#{eprofesionalBean.entity.tasaUnidades}"/>
                                    <h:outputText value="#{msgs['formGEO']}:" styleClass="FontBold"/>
                                    <h:outputText value="#{eprofesionalBean.getPatternMoneda()} #{eprofesionalBean.getMontoGeo()} "/>
                                    <h:outputText value="#{msgs['formCosto']}:" styleClass="FontBold"/>
                                    <h:outputText value="#{eprofesionalBean.getPatternMoneda()} #{eprofesionalBean.entity.calcularMontoTasasYadicioanles}"/>
                                </p:panelGrid>
                            </p:fieldset>
                            <p:fieldset legend="#{msgs['formODS']}"
                                        rendered="#{eprofesionalBean.entity.isGenerada()}">
                                <p:panelGrid columns="2"
                                             columnClasses="ui-grid-col-4,ui-grid-col-8" layout="grid"
                                             styleClass="ui-panelgrid-blank">
                                    <h:outputText value="#{msgs['form.fecha.creacion']}:" styleClass="FontBold"/>
                                    <h:outputText value="#{eprofesionalBean.entity.ordenDeServicio.ODSfecha}">
                                        <f:convertDateTime pattern="dd-MM-yyyy HH:mm"/>
                                    </h:outputText>

                                    <h:outputText value="#{msgs['formEstado']}:" styleClass="FontBold"/>
                                    <h:outputText
                                            value="#{eprofesionalBean.entity.ordenDeServicio.ODSestado.descripcion}"/>

                                    <h:outputText value="#{msgs['form.forma.pago']}:" styleClass="FontBold"/>
                                    <h:outputText
                                            value="#{eprofesionalBean.entity.ordenDeServicio.formapago.descripcion}"/>
                                    <h:outputText
                                            rendered="#{eprofesionalBean.entity.isTransferencia()}"
                                            value="#{msgs['form.codigo.tx']}:" styleClass="FontBold"/>
                                    <h:outputText
                                            rendered="#{eprofesionalBean.entity.isTransferencia()}"
                                            value="#{eprofesionalBean.entity.ordenDeServicio.ODScodigoTX}"/>

                                    <h:outputText
                                            value="#{msgs['form.fecha.tx']}:" styleClass="FontBold"/>
                                    <h:outputText
                                            value="#{eprofesionalBean.entity.ordenDeServicio.ODSfechaTX}">
                                        <f:convertDateTime pattern="dd-MM-yyyy HH:mm"/>
                                    </h:outputText>
                                    <h:outputText value="#{msgs['form.monto']}:" styleClass="FontBold"/>
                                    <h:outputText
                                            value="#{eprofesionalBean.getPatternMoneda()} #{eprofesionalBean.entity.calcularMonto}"/>
                                </p:panelGrid>
                            </p:fieldset>
                        </p:panel>
                        <p:commandButton id="downloadLink"
                                         rendered="#{eprofesionalBean.mostrarBotonGenerarPDF(eprofesionalBean.entity)}"
                                         value="Generar PDF" styleClass="FloatNoneOnMobile "
                                         onclick="PF('downloadLink').show()">
                        </p:commandButton>
                        <p:dialog header="#{msgs['confirmacion']}" widgetVar="downloadLink" minHeight="40"
                                  draggable="false" resizable="false">
                            <h:panelGrid columns="1" cellpadding="5">
                                <h:outputText value="#{msgs['confirmarPdf']}"/>
                                <h:outputText value="#{msgs['confirmarPdfAccion']}"/>
                            </h:panelGrid>
                            <h:panelGrid columns="2" cellpadding="5">
                                <p:commandButton value="No" onclick="PF('downloadLink').hide()"
                                                 icon="fa fa-close"
                                                 styleClass="RedButton Fs16 White RaisedButton Fleft FloatNoneOnMobile"/>
                                <p:commandButton value="Si" ajax="false" onclick="PF('downloadLink').hide();"
                                                 icon="fa fa-sign-in"
                                                 styleClass="GreenButton Fs16 White Fright FloatNoneOnMobile "
                                                 actionListener="#{eprofesionalBean.prepDownload(null)}">
                                    <p:fileDownload value="#{eprofesionalBean.download}"/>
                                </p:commandButton>
                            </h:panelGrid>
                        </p:dialog>
                    </h:form>
                    <div class="EmptyBox20"></div>
                    <div class="EmptyBox5 ShowOnMobile"></div>
                    <div class="Wid23 Responsive50 Fright">
                        <p:commandButton value="#{msgs['btnVolver']}"
                                         icon="fa fa-close"
                                         styleClass="RedButton Fs16 White RaisedButton Fleft FloatNoneOnMobile"
                                         action="search?faces-redirect=true"
                                         title="#{msgs['btnVolver']}" immediate="true"/>
                    </div>
                </div>
            </div>
        </div>

    </ui:define>
</ui:composition>
</html>

