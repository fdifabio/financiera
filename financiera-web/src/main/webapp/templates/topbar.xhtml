<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:sec="http://www.springframework.org/security/facelets/tags">

    <!-- TOPBAR START -->
    <style>
        #top-menu-left > li {
            margin-top: 5px;
            width: 10%;
        }

        .caja {
            margin-top: 5px;
            border-radius: 30px;
            -webkit-border-radius: 30px;
            -moz-border-radius: 30px;
            padding: 2px 4px 3px;
            position: absolute;
            font-family: 'robotoregular';
            background-color: #18849c;
            height: 35px;
        }
    </style>

    <div id="layout-topbar">
        <a id="mobile-menu-button"> <span class="ButtonLine"
                                          id="ButtonLine1"></span> <span class="ButtonLine" id="ButtonLine2"></span>
            <span class="ButtonLine" id="ButtonLine3"></span>
        </a> <a id="show-top-menu" class="ShowOnMobile ripplelink"><i
            class="icon-more_vert" id="active"></i><i class="icon-close DispNone"
                                                      id="passive"></i> </a>

        <ul class="top-menu" style="float: left;">
            <li>
                <a href="/pages/home.jsf" data-toggle="tooltip" title="Inicio">
                    <i class="icon-home"></i>
                    <span class="ShowOnMobile"></span>
                </a>
            </li>
            <li>
                <a href="/pages/preferencias/search.jsf" data-toggle="tooltip" title="#{msgs['menu.preferencias']}">
                    <i class="icon-settings"></i>
                    <span class="ShowOnMobile"></span>
                </a>
            </li>
            <li>
                <a href="/pages/cliente/search.jsf" data-toggle="tooltip" title="#{msgs['menu.cliente']}">
                    <i class="fa fa-users"></i>
                    <span class="ShowOnMobile"></span>
                </a>
            </li>
            <li>
                <a href="/pages/credito/search.jsf" data-toggle="tooltip" title="#{msgs['menu.credito']}">
                    <i class="fa fa-money"></i>
                    <span class="ShowOnMobile"></span>
                </a>
            </li>
            <li>
                <a href="/pages/reportes/search.jsf" data-toggle="tooltip" title="#{msgs['menu.reportes']}">
                    <i class="fa fa-bar-chart"></i>
                    <span class="ShowOnMobile"></span>
                </a>
            </li>
            <li>
                <a href="/pages/caja/search.jsf" data-toggle="tooltip" title="#{msgs['menu.caja']}">
                    <i class="fa fa-balance-scale "></i>
                    <span class="ShowOnMobile"></span>
                </a>
            </li>
            <li>
                <h:panelGroup id="txt_count">
                    <h:panelGroup rendered="#{authenticationBean.caja.habilitada()}">
                        <h:form>
                            <p:growl id="growlhabilitar" sticky="true" showDetail="true" life="3000"/>
                            <h:commandButton styleClass="caja White" value="Caja Deshabilitada"
                                             onclick="PF('habilitar').show(); return false;"/>
                            <p:dialog header="Esta seguro que desea habilitar la caja?" widgetVar="habilitar"
                                      resizable="false">
                                <h:panelGrid columns="3" cellpadding="5">
                                    <h:outputLabel for="monto" value="Monto:"/>
                                    <p:inputText id="monto" value="#{authenticationBean.monto}" required="true"
                                                 label="monto" requiredMessage="Ingrese un valor"/>

                                    <p:commandButton value="Habilitar" style="float:right;"
                                                     update="growlhabilitar txt_count"
                                                     actionListener="#{authenticationBean.habilitarCaja()}"
                                                     oncomplete="habilitar(xhr, status, args)"/>

                                </h:panelGrid>
                            </p:dialog>
                        </h:form>
                    </h:panelGroup>
                    <h:panelGroup rendered="#{!authenticationBean.caja.habilitada()}">
                        <h:form>
                            <p:growl id="growldeshabilitar" sticky="true" showDetail="true" life="3000"/>
                            <h:commandButton styleClass="caja White" value="Caja Habilitada"
                                             onclick="PF('deshabilitar').show(); return false;"/>
                            <p:dialog header="Esta seguro que desea deshabilitar la caja?" widgetVar="deshabilitar"
                                      resizable="false">
                                <h:panelGrid columns="1" cellpadding="5" style="float: right;">
                                        <p:commandButton value="Deshabilitar" update="growldeshabilitar txt_count" class="RedButton"
                                                         actionListener="#{authenticationBean.deshabilitarCaja()}"
                                                         oncomplete="deshabilitar(xhr, status, args)"/>

                                </h:panelGrid>
                            </p:dialog>
                        </h:form>
                    </h:panelGroup>
                </h:panelGroup>

            </li>
        </ul>
        <script type="text/javascript">
            function habilitar(xhr, status, args) {
                if (args.validationFailed) {
                    PF('habilitar').jq.effect("shake", {times: 5}, 100);
                }
                else {
                    PF('habilitar').hide();
                }
            }
            function deshabilitar(xhr, status, args) {
                if (args.validationFailed) {
                    PF('deshabilitar').jq.effect("shake", {times: 5}, 100);
                }
                else {
                    PF('deshabilitar').hide();
                }
            }
        </script>
        <ul id="top-menu">
            <li><a class="ripplelink"><i class="icon-cog"></i> <span
                    class="ShowOnMobile">#{msgs['miPerfil']}</span></a>
                <ul>
                    <li><h:form>
                        <sec:ifAnyGranted roles="ROLE_ADMIN,ROLE_PRESTAMISTA">
                            <h:commandLink
                                    action="/pages/user/cambioclave?faces-redirect=true" ajax="false">
                                <i class="icon-vpn_key"></i>
                                <h:outputText value="#{msgs['menu.cambio.clave']}"/>
                            </h:commandLink>
                        </sec:ifAnyGranted>
                    </h:form></li>
                </ul>
            </li>
            <li><a class="ripplelink"><i class="icon-power"></i> <span
                    class="ShowOnMobile">Salir</span></a>
                <ul>
                    <li><h:form>
                        <h:commandLink id="logout" action="#{authenticationBean.logout}">
								<span class="Red"> <i class="icon-person Fs30 DispBlock"></i>
									<h:outputText
                                            value="#{msgs['salir']}: #{authenticationBean.bienvenido}"/>
								</span>
                        </h:commandLink>

                    </h:form></li>
                </ul>
            </li>
        </ul>
    </div>

    <!-- TOPBAR END -->

</ui:composition>
